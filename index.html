<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <title>Document</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="container">
      <div class="image_box"></div>
      <div class="image_bottom">
        <p class="image_photographer">
          Photographer:
          <span class="image_photographer-name"></span>
        </p>
        <div class="image_likes-box">
          <button class="image_likes-button" type="button">
            <span class="material-symbols-outlined"> favorite </span>
          </button>
          <span class="image_likes-counter"></span>
        </div>
      </div>
    </div>
    <script>
      window.addEventListener('load', () => {
        renderPhoto();
      });

      async function getRandomPhoto() {
        const apiKey = 'neX8vIjfM2O2A8mQJWAfAOY_wkldd_7wo3XR8Exfrs0';
        try {
          const response = await fetch(
            `https://api.unsplash.com/photos/random?client_id=${apiKey}`
          );
          const photo = await response.json();
          return photo;
        } catch (error) {
          console.error('Ошибка при загрузке фотографий:', error);
          return {};
        }
      }

      async function renderPhoto() {
        const photo = await getRandomPhoto();
        if (photo) {
          const imageBox = document.querySelector('.image_box');
          const img = document.createElement('img');
          img.classList.add('image');

          img.src = photo.urls.small;
          img.alt = photo.alt_description;
          imageBox.appendChild(img);

          const photographerName = document.querySelector(
            '.image_photographer-name'
          );
          photographerName.textContent = `${photo.user.name}`;

          const imageLikesCounterSpan = document.querySelector(
            '.image_likes-counter'
          );
          imageLikesCounterSpan.textContent = `${photo.likes}`;
        }
      }

      const counterButton = document.querySelector(
        '.image_likes-button'
      );

      counterButton.addEventListener('click', function () {
        increaseCounter();
      });

      function increaseCounter() {
        const likesCounter = document.querySelector(
          '.image_likes-counter'
        );
        const photographerName = document.querySelector(
          '.image_photographer-name'
        );
        const name = photographerName.textContent;
        const currentCounter = parseInt(likesCounter.textContent, 10);
        likesCounter.textContent = currentCounter + 1;
        localStorage.setItem(`${name}`, JSON.stringify('лайкнул')); // записать
      }
    </script>
  </body>
</html>
